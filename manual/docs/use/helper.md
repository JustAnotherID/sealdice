---
lang: zh-cn
title: 辅助机制
---

# 辅助机制

::: info 本节内容

本节将介绍海豹的一些辅助机制，请善用侧边栏和搜索，按需阅读文档。

:::

## 属性同义词

例如在COC录卡的时候，有这样的指令:

```
.st 力量50str50
Dice: <木落>的属性录入完成，本次共记录了2条数据 (其中1条为同义词)
```

很显然`力量`和`str`是同一个属性，所以只会录入一条属性。

```
.st show
Dice: <木落>的个人属性为：力量: 50
```

同理，在`.ra`判定以及其他场景中，`力量`和`str`也一样会当作同一个值处理。

此外，同义词大小写不敏感。sTR视同str



同义词表遵循以下原则(以CO7为例):

- 中文和英文缩写等价，如`力量`和`str`
- 同一概念的不同常用称呼，如`san` `san值` `理智` `理智值`
- 易混词汇，如`侦查` `侦察`
- 不同版本翻译区别，如COC6版和7版`话术` `快速交谈`
- 简繁区别，如`体质` `體質`
- *少量游戏性等值属性，如`枪械` `射击`，`智力` `灵感`，`教育` `知识`



COC7同义词具体内容如下:

```typescript
{
	"理智": {"san", "san值", "理智值", "理智点数", "心智", "心智点数", "心智點數", "理智點數"},
	"力量": {"str"},
	"体质": {"con", "體質"},
	"体型": {"siz", "體型", "体型", "体形", "體形"},
	"敏捷": {"dex"},
	"外貌": {"app", "外表"},
	"意志": {"pow"},
	"教育": {"edu", "知识", "知識"}, // 教育和知识等值而不是一回事，注意
	"智力": {"int", "灵感", "靈感"}, // 智力和灵感等值而不是一回事，注意

	"幸运":     {"luck", "幸运值", "运气", "幸運", "運氣", "幸運值"},
	"生命值":    {"hp", "生命", "体力", "體力", "血量", "耐久值"},
	"魔法值":    {"mp", "魔法", "魔力", "魔力值"},
	"护甲":     {"装甲", "護甲", "裝甲"},
	"枪械":     {"火器", "射击", "槍械", "射擊"},
	"会计":     {"會計"},
	"人类学":    {"人類學"},
	"估价":     {"估價"},
	"考古学":    {"考古學"},
	"魅惑":     {"取悦", "取悅"},
	"攀爬":     {"攀岩", "攀登"},
	"计算机使用":  {"电脑使用", "計算機使用", "電腦使用", "计算机", "电脑", "計算機", "電腦"},
	"信用评级":   {"信誉", "信用", "信誉度", "cr", "信用評級", "信譽", "信譽度"},
	"克苏鲁神话":  {"cm", "克苏鲁", "克苏鲁神话知识", "克蘇魯", "克蘇魯神話", "克蘇魯神話知識"},
	"乔装":     {"喬裝"},
	"闪避":     {"閃避"},
	"汽车驾驶":   {"汽車駕駛", "汽车", "驾驶", "汽車", "駕駛"},
	"电气维修":   {"电器维修", "电工", "電氣維修", "電器維修", "電工"},
	"电子学":    {"電子學"},
	"话术":     {"快速交谈", "話術", "快速交談"},
	"历史":     {"歷史"},
	"恐吓":     {"恐嚇"},
	"跳跃":     {"跳躍"},
	"母语":     {"母語"},
	"图书馆使用":  {"圖書館使用", "图书馆", "图书馆利用", "圖書館", "圖書館利用"},
	"聆听":     {"聆聽"},
	"锁匠":     {"开锁", "撬锁", "钳工", "鎖匠", "鉗工", "開鎖", "撬鎖"},
	"机械维修":   {"机器维修", "机修", "機器維修", "機修"},
	"医学":     {"醫學"},
	"博物学":    {"自然", "自然学", "自然史", "自然學", "博物學"},
	"领航":     {"导航", "領航", "導航"},
	"神秘学":    {"神秘學"},
	"操作重型机械": {"重型操作", "重型机械", "重型", "重机", "操作重型機械", "重型機械", "重機"},
	"说服":     {"辩论", "议价", "演讲", "說服", "辯論", "議價", "演講"},
	"精神分析":   {"心理分析"},
	"心理学":    {"心理學"},
	"骑术":     {"騎術"},
	"妙手":     {"藏匿", "盗窃", "盜竊"},
	"侦查":     {"侦察", "偵查", "偵察"},
	"潜行":     {"躲藏"},
	"投掷":     {"投擲"},
	"追踪":     {"跟踪", "追蹤", "跟蹤"},
	"驯兽":     {"动物驯养", "馴獸", "動物馴養"},
	"读唇":     {"唇语", "讀唇", "唇語"},
	"炮术":     {"炮術"},
	"学识":     {"学问", "學識", "學問"},
	"艺术与手艺":  {"艺术和手艺", "艺术", "手艺", "工艺", "技艺", "藝術與手藝", "藝術和手藝", "藝術", "手藝", "工藝", "技藝"},
	"美术":     {"美術"},
	"伪造":     {"偽造"},
	"摄影":     {"攝影"},
	"理发":     {"理髮"},
	"书法":     {"書法"},
	"木匠":     {"木工"},
	"厨艺":     {"烹饪", "廚藝", "烹飪"},
	"写作":     {"文学", "寫作", "文學"},
	"歌剧歌唱":   {"歌劇歌唱"},
	"技术制图":   {"技術製圖"},
	"裁缝":     {"裁縫"},
	"声乐":     {"聲樂"},
	"喜剧":     {"喜劇"},
	"器乐":     {"器樂"},
	"速记":     {"速記"},
	"园艺":     {"園藝"},
	"斗殴":     {"鬥毆"},
	"剑":      {"剑术", "劍", "劍術"},
	"斧":      {"斧头", "斧子", "斧頭"},
	"链锯":     {"电锯", "油锯", "鏈鋸", "電鋸", "油鋸"},
	"链枷":     {"连枷", "連枷", "鏈枷"},
	"绞索":     {"绞具", "絞索", "絞具"},
	"手枪":     {"手槍"},
	"步枪":     {"霰弹枪", "步霰", "步枪/霰弹枪", "散弹枪", "步槍", "霰彈槍", "步霰", "步槍/霰彈槍", "散彈槍"},
	"弓":      {"弓术", "弓箭", "弓術"},
	"火焰喷射器":  {"火焰噴射器"},
	"机枪":     {"機槍"},
	"矛":      {"投矛"},
	"冲锋枪":    {"衝鋒槍"},
	"天文学":    {"天文學"},
	"生物学":    {"生物學"},
	"植物学":    {"植物學"},
	"化学":     {"化學"},
	"密码学":    {"密碼學"},
	"工程学":    {"工程學"},
	"司法科学":   {"司法科學"},
	"地质学":    {"地理学", "地質學", "地理學"},
	"数学":     {"數學"},
	"气象学":    {"氣象學"},
	"药学":     {"藥學"},
	"物理学":    {"物理", "物理學"},
	"动物学":    {"動物學"},
	"船":      {"开船", "驾驶船", "開船", "駕駛船"},
	"飞行器":    {"开飞行器", "驾驶飞行器", "飛行器", "開飛行器", "駕駛飛行器"},
	"科学":     {"科學"},
	"海洋":     {"海上"},
	"极地":     {"極地"},
	"语言":     {"外语", "語言", "外語"},
}
```

同义词列表可以在骰子运行后，查看骰子目录下`data/default/extensions/coc7/attribute.yaml`



DND同义词列表:

```typescript
{
	"力量": {"str", "Strength"},
	"敏捷": {"dex", "Dexterity"},
	"体质": {"con", "Constitution", "體質"},
	"智力": {"int", "Intelligence"},
	"感知": {"wis", "Wisdom"},
	"魅力": {"cha", "Charisma"},

	"ac":    {"AC", "护甲等级", "护甲值", "护甲", "護甲等級", "護甲值", "護甲", "装甲", "裝甲"},
	"hp":    {"HP", "生命值", "生命", "血量", "体力", "體力", "耐久值"},
	"hpmax": {"HPMAX", "生命值上限", "生命上限", "血量上限", "耐久上限"},
	"dc":    {"DC", "难度等级", "法术豁免", "難度等級", "法術豁免"},
	"hd":    {"HD", "生命骰"},
	"pp":    {"PP", "被动察觉", "被动感知", "被動察覺", "被动感知"},

	"熟练": {"熟练加值", "熟練", "熟練加值"},
	"体型": {"siz", "size", "體型", "体型", "体形", "體形"},

	// 技能
	"运动": {"Athletics", "運動"},

	"体操": {"Acrobatics", "杂技", "特技", "體操", "雜技"},
	"巧手": {"Sleight of Hand"},
	"隐匿": {"Stealth", "隱匿", "潜行", "潛行"},

	"调查": {"Investigation", "調查"},
	"奥秘": {"Arcana", "奧秘"},
	"历史": {"History", "歷史"},
	"自然": {"Nature"},
	"宗教": {"Religion"},

	"察觉": {"Perception", "察覺", "觉察", "覺察"},
	"洞悉": {"Insight", "洞察"},
	"驯兽": {"Animal Handling", "馴獸", "驯养", "馴養"},
	"医药": {"Medicine", "醫藥", "医疗", "醫療"},
	"求生": {"Survival", " 生存"},

	"游说": {"Persuasion", "说服", "话术", "遊說", "說服", "話術"},
	"欺瞒": {"Deception", "唬骗", "欺诈", "欺骗", "诈骗", "欺瞞", "唬騙", "欺詐", "欺騙", "詐騙"},
	"威吓": {"Intimidation", "恐吓", "威嚇", "恐嚇"},
	"表演": {"Performance"},
}
```

目前不可自定义。如有建议欢迎反馈。



## 变量机制

你可能注意到，这里出现了一些`san` 、`$t玩家`之类的东西，这些是SealDice中的**变量**。

内置变量有：

| 变量名         | 内容                                                 | 示例结果                |
| -------------- | ---------------------------------------------------- | ----------------------- |
| $t玩家         | 当前人物卡的名字，如果不存在则为群昵称或QQ昵称。     | <木落>                  |
| $t玩家_RAW     | 同上，但没有<>                                       | 木落                    |
| $tQQ昵称       | QQ昵称                                               | <木落>                  |
| $t账号ID       | 海豹格式的ID                                         | QQ:123456789            |
| $t账号ID_RAW   | 原始格式的ID                                         | 123456789               |
| $tQQ           | 海豹格式的ID                                         | QQ:123456789            |
| $t群名         | 群名                                                 | 海豹核心·SealDice用户群 |
| $t群号         | 海豹格式的ID                                         | QQ-Group:987654321      |
| $t群号_RAW     | 原始格式的ID                                         | 987654321               |
| $t个人骰子面数 | 个人骰子面数                                         | 100                     |
| $tDate         | 数字格式的现日期                                     | 20230109                |
| $tYear         | 数字格式的年份                                       | 2023                    |
| $tMonth        | 数字格式的现月份                                     | 1                       |
| $tDay          | 数字格式的现日期                                     | 9                       |
| $tWeekday      | 数字格式的星期（1-7）                                | 1                       |
| $tHour         | 数字格式的现时间（小时）                             | 15                      |
| $tMinute       | 数字格式的现时间（分钟）                             | 41                      |
| $tSecond       | 数字格式的现时间（秒）                               | 55                      |
| $tTimestamp    | 数字格式的10位时间戳                                 | 1673250115              |
| $t文本长度     | 触发消息的文本，汉字长度为3，英文字母和数字长度为1。 | 6                       |
| $t平台         | 触发的平台                                           | QQ                      |
| $t游戏模式     | 随.set coc/dnd改变                                   | coc7                    |
| $t消息类型     | 触发位置为群还是私聊。（group/private）              | group                   |
| 娱乐:今日人品  | 自定义文案                                           | <木落>的今日人品为0     |
| 常量:APPNAME   | 软件名                                               | SealDice                |
| 常量:VERSION   | 版本号                                               | 0.91测试版 v20220228    |
| $tMsgID        | 消息ID，仅自定义回复中可用。                         | -123                    |

变量的名称可以是汉字、字母和数字，`$t`是一个特殊的变量前缀。

*注: 所有自定义文案均为可用变量。

| 变量名字 | 用途                     | 举例             |
| -------- | ------------------------ | ---------------- |
| 普通名字 | 玩家的角色属性           | 理智、力量、智力 |
| $t开头   | 个人临时变量，不存数据库 | $t随机点数       |
| $m开头   | 个人变量，跨群存在       | $m今日人品       |
| $g开头   | 群变量，群内所有人共享   | $g群主体重       |

所有变量均可以在`.rx` / `.rxh` / `.ra`/`.text`等指令中、以及在自定义文案(`text-template.yaml`)中使用

> 如果一部分变量无效，请检查海豹是否为最新版本。



### 附录：常用变量名表

$t判定结果 // 大成功 成功 失败
$t判定值
$t增量
$t新值
$t旧值
$t变化量
$t表达式文本
$t数量
$t失败数量
$t成功数量
$t属性
$t结果文本
$t计算过程

