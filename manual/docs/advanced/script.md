---
lang: zh-cn
title: 内置脚本语言
---

# 内置脚本语言

::: info 本节内容

本节将介绍海豹内置的脚本语言，请善用侧边栏和搜索，按需阅读文档。

:::

## 语法

### 变量机制

见上方 **辅助机制-变量机制** 一节



### 数据类型和赋值语句

```
// 文本类型 <- 注意，目前并不支持写注释，此为教程
$t0 = '文本'
$t0 = "也是文本"
$t0 = `特殊文本类型，可以插入表达式，例如，玩家的力量数值: {力量}`
$t0 = `另一种插入表达式的写法 {% 力量 %} `

// 数字类型
$t0 = 1

// 布尔 没有专门的布尔类型，0或空字符串被视为False，非零和非空字符串为True
$t0 > 1
$t0 >= 1
$t0 == 1
$t0 != 1
$t0 < 1
$t0 <= 1
```



### 语句

多个语句可以用 ; 分隔，取分隔后的最后一项的值，为整个表达式的值，例如：

```
$t0 = 1;2;3
```

此时$t0的值为3



### 运算符

#### 数学运算

```
加减乘除余 + -* / %
乘方 ^ ** // 2 ** 3 或 2 ^ 3 即2的3次方
```



#### 骰子算符

d 常规骰子算符，用法举例 d20  2d20k1  d20优势

f  命运骰，随机骰4次，每骰结果可能是-1 0 1，记为- 0 +

b 奖励骰(COC)

p 惩罚骰(COC)

c 双十字



### 条件算符 (?)

```
灵视 >= 40 ? '如果灵视达到40以上，你就能看到这句话'
```

可以用这个指令测试，下同：

```
.st 灵视41
.text {灵视 >= 40 ? '如果灵视达到40以上，你就能看到这句话'}
```



#### 多重条件算符 (? ,)

```
灵视 >= 80 ? '看得很清楚吗？',
灵视 >= 50 ? '不错，再靠近一点……',
灵视 >= 30 ? '仔细听……',
灵视 >= 0 ? '呵，无知之人。'
```

应用举例，默认的jrrp

```
{$t玩家} 今日人品为{$t人品}，{%
    $t人品 > 95 ? '人品爆表！',
    $t人品 > 80 ? '运气还不错！',
    $t人品 > 50 ? '人品还行吧',
    $t人品 > 10 ? '今天不太行',
    1 ? '流年不利啊！'
%}
```



#### 三目运算符 (? :)

```
灵视 >= 40 ? '如果灵视达到40以上，你就能看到这句话' : '无知亦是幸运'
```



### 条件语句  

注意：如果下面的代码输出“格式化错误”，那是因为你的$t0不是数值；字符串当然不能和数值比较大小，所以会报错。  
解决方法：`.text {$t0=0}`

```
if $t0 > 10 {
    $t1 = "aaa"
} else {
    $t1 = 'bbb'
}
```

```
实际测试:
.text {% if $t0 > 10 { $t1="aaa"} else { $t1 = 'bbb' }; $t1 %}
```

